import streamlit as st
import numpy as np
import matplotlib.pyplot as plt

st.set_page_config(page_title="–°–∏–º—É–ª–∞—Ü–∏—è –Ω–∞ —Å–±–ª—ä—Å—ä–∫ –Ω–∞ —á–∞—Å—Ç–∏—Ü–∏", layout="centered")
st.title("üí• –°–∏–º—É–ª–∞—Ü–∏—è –Ω–∞ —Å–±–ª—ä—Å—ä–∫ –Ω–∞ —á–∞—Å—Ç–∏—Ü–∏")
st.markdown("""
–ò–∑—Å–ª–µ–¥–≤–∞–π –∫–∞–∫ —Å–µ –¥—ä—Ä–∂–∞—Ç –¥–≤–µ —á–∞—Å—Ç–∏—Ü–∏ –ø—Ä–∏ –µ–ª–∞—Å—Ç–∏—á–µ–Ω —Å–±–ª—ä—Å—ä–∫. –ü—Ä–æ–º–µ–Ω—è–π –º–∞—Å–∏—Ç–µ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏—Ç–µ –∏–º –∏ –≤–∏–∂ –∫–∞–∫–≤–æ —Å–µ —Å–ª—É—á–≤–∞ —Å–ª–µ–¥ —Å–±–ª—ä—Å—ä–∫–∞.
""")

# –í—Ö–æ–¥–Ω–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
st.sidebar.header("üîß –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –Ω–∞ —á–∞—Å—Ç–∏—Ü–∏—Ç–µ")
m1 = st.sidebar.slider("–ú–∞—Å–∞ –Ω–∞ —á–∞—Å—Ç–∏—Ü–∞ 1 (kg)", 1.0, 10.0, 5.0)
v1 = st.sidebar.slider("–°–∫–æ—Ä–æ—Å—Ç –Ω–∞ —á–∞—Å—Ç–∏—Ü–∞ 1 (m/s)", -10.0, 0.0, -5.0)
m2 = st.sidebar.slider("–ú–∞—Å–∞ –Ω–∞ —á–∞—Å—Ç–∏—Ü–∞ 2 (kg)", 1.0, 10.0, 5.0)
v2 = st.sidebar.slider("–°–∫–æ—Ä–æ—Å—Ç –Ω–∞ —á–∞—Å—Ç–∏—Ü–∞ 2 (m/s)", 0.0, 10.0, 5.0)

st.subheader("‚öôÔ∏è –ò–∑—á–∏—Å–ª–µ–Ω–∏—è —Å–ª–µ–¥ —Å–±–ª—ä—Å—ä–∫–∞")
v1f = (v1 * (m1 - m2) + 2 * m2 * v2) / (m1 + m2)
v2f = (v2 * (m2 - m1) + 2 * m1 * v1) / (m1 + m2)

st.write(f"‚û°Ô∏è –°–∫–æ—Ä–æ—Å—Ç –Ω–∞ —á–∞—Å—Ç–∏—Ü–∞ 1 —Å–ª–µ–¥ —Å–±–ª—ä—Å—ä–∫–∞: **{v1f:.2f} m/s**")
st.write(f"‚û°Ô∏è –°–∫–æ—Ä–æ—Å—Ç –Ω–∞ —á–∞—Å—Ç–∏—Ü–∞ 2 —Å–ª–µ–¥ —Å–±–ª—ä—Å—ä–∫–∞: **{v2f:.2f} m/s**")

t = np.linspace(0, 2, 100)
x1_before = v1 * t
x2_before = v2 * t
x1_after = v1f * t + x1_before[-1]
x2_after = v2f * t + x2_before[-1]

fig, ax = plt.subplots(figsize=(8, 4))
ax.plot(t, x1_before, label="–ß–∞—Å—Ç–∏—Ü–∞ 1 (–ø—Ä–µ–¥–∏)", color='blue')
ax.plot(t, x2_before, label="–ß–∞—Å—Ç–∏—Ü–∞ 2 (–ø—Ä–µ–¥–∏)", color='red')
ax.plot(t, x1_after, '--', label="–ß–∞—Å—Ç–∏—Ü–∞ 1 (—Å–ª–µ–¥)", color='blue')
ax.plot(t, x2_after, '--', label="–ß–∞—Å—Ç–∏—Ü–∞ 2 (—Å–ª–µ–¥)", color='red')
ax.set_xlabel("–í—Ä–µ–º–µ (s)")
ax.set_ylabel("–ü–æ–∑–∏—Ü–∏—è (m)")
ax.set_title("–î–≤–∏–∂–µ–Ω–∏–µ –Ω–∞ —á–∞—Å—Ç–∏—Ü–∏—Ç–µ –ø—Ä–µ–¥–∏ –∏ —Å–ª–µ–¥ —Å–±–ª—ä—Å—ä–∫–∞")
ax.legend()
ax.grid(True)
st.pyplot(fig)

st.subheader("üß™ –¢–µ—Å—Ç: –ö–∞–∫–≤–æ –Ω–∞—É—á–∏?")
question = st.radio(
    "–ö–∞–∫–≤–æ —Å–µ —Å–ª—É—á–≤–∞ –ø—Ä–∏ –µ–ª–∞—Å—Ç–∏—á–µ–Ω —Å–±–ª—ä—Å—ä–∫?",
    options=[
        "–°—É–º–∞—Ç–∞ –æ—Ç –∫–∏–Ω–µ—Ç–∏—á–Ω–∞—Ç–∞ –µ–Ω–µ—Ä–≥–∏—è —Å–µ –∑–∞–ø–∞–∑–≤–∞",
        "–ò–º–ø—É–ª—Å—ä—Ç —Å–µ –≥—É–±–∏",
        "–ß–∞—Å—Ç–∏—Ü–∏—Ç–µ —Å–ø–∏—Ä–∞—Ç"
    ]
)

if question == "–°—É–º–∞—Ç–∞ –æ—Ç –∫–∏–Ω–µ—Ç–∏—á–Ω–∞—Ç–∞ –µ–Ω–µ—Ä–≥–∏—è —Å–µ –∑–∞–ø–∞–∑–≤–∞":
    st.success("‚úÖ –ü—Ä–∞–≤–∏–ª–Ω–æ! –ï–ª–∞—Å—Ç–∏—á–Ω–∏—è—Ç —Å–±–ª—ä—Å—ä–∫ –∑–∞–ø–∞–∑–≤–∞ –µ–Ω–µ—Ä–≥–∏—è—Ç–∞ –∏ –∏–º–ø—É–ª—Å–∞.")
else:
    st.error("‚ùå –ù–µ –µ –≤—è—Ä–Ω–æ. –ü—Ä–∏ –µ–ª–∞—Å—Ç–∏—á–µ–Ω —Å–±–ª—ä—Å—ä–∫ —Å–µ –∑–∞–ø–∞–∑–≤–∞—Ç –∫–∞–∫—Ç–æ –µ–Ω–µ—Ä–≥–∏—è—Ç–∞, —Ç–∞–∫–∞ –∏ –∏–º–ø—É–ª—Å—ä—Ç.")

st.markdown("""
---
**üìö –ù–∞—É—á–∏ –ø–æ–≤–µ—á–µ:**  
–í –¶–ï–†–ù —É—á–µ–Ω–∏—Ç–µ –∏–∑—Å–ª–µ–¥–≤–∞—Ç —Å–±–ª—ä—Å—ä—Ü–∏ –º–µ–∂–¥—É –ø—Ä–æ—Ç–æ–Ω–∏ –ø—Ä–∏ –≤–∏—Å–æ–∫–∏ –µ–Ω–µ—Ä–≥–∏–∏, –∑–∞ –¥–∞ —Ä–∞–∑–∫—Ä–∏—è—Ç –∫–∞–∫–≤–æ —Å—Ç–æ–∏ –≤ –æ—Å–Ω–æ–≤–∞—Ç–∞ –Ω–∞ –º–∞—Ç–µ—Ä–∏—è—Ç–∞ –∏ —Å–∏–ª–∏—Ç–µ –≤ –ø—Ä–∏—Ä–æ–¥–∞—Ç–∞.  
–¢–µ–∑–∏ –ø—Ä–∏–Ω—Ü–∏–ø–∏ –Ω–∞ –∏–º–ø—É–ª—Å –∏ –µ–Ω–µ—Ä–≥–∏—è —Å—Ç–æ—è—Ç –≤ –æ—Å–Ω–æ–≤–∞—Ç–∞ –Ω–∞ –≤—Å–∏—á–∫–∏ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏ –≤ –ì–æ–ª–µ–º–∏—è –∞–¥—Ä–æ–Ω–µ–Ω —É—Å–∫–æ—Ä–∏—Ç–µ–ª.
""")
